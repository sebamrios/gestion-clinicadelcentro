{% extends 'base.html' %}
{% block title %}Inicio - Clínica del Centro{% endblock %}
{% load static %}
{% block content %}

<hr>

<main class="container">
    <section class="py-5" style="background-color: #f8f9fa;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-5 mb-4 mb-md-0 anim-section">
                    <img src="{% static 'img/clinica.jpg' %}" alt="Nuestro equipo" class="img-fluid rounded shadow">
                </div>
                <div class="col-md-7 anim-section">
                    <h2 class="mb-3">¿Quiénes somos?</h2>
                    <p class="lead">
                        En Clínica del Centro nos dedicamos al cuidado integral de la salud de nuestros pacientes.
                        Nuestro equipo médico está conformado por profesionales comprometidos con brindar atención de calidad,
                        acompañando cada etapa con calidez humana, innovación y compromiso.
                    </p>
                </div>
            </div>
        </div>
    </section>
</main>

<hr>

<section id="especialidades" class="py-3 bg-light">
    <div class="container">
        <h2 class="text-center mb-3 anim-specialties">Especialidades</h2>
        <div class="accordion anim-specialties" id="accordionEspecialidades">
            {% for especialidad in especialidades %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ especialidad.id }}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ especialidad.id }}" aria-expanded="false" aria-controls="collapse{{ especialidad.id }}">
                        {{ especialidad.nombre }}
                    </button>
                </h2>
                <div id="collapse{{ especialidad.id }}" class="accordion-collapse collapse" aria-labelledby="heading{{ especialidad.id }}" data-bs-parent="#accordionEspecialidades">
                    <div class="accordion-body">
                        <p>{{ especialidad.descripcion }}</p>

                        {% for profesional in especialidad.profesionales_activos %}
                        <div class="mb-3">
                            <button class="btn btn-outline-secondary w-100 text-start" data-bs-toggle="collapse" data-bs-target="#profesional{{ profesional.id }}">
                                {{ profesional.nombre_completo }}
                            </button>
                            <div class="collapse mt-2" id="profesional{{ profesional.id }}">
                                <ul>
                                    <li><strong>Especialidad:</strong> {{ profesional.especialidad }}</li>
                                    <li><strong>Población:</strong> {{ profesional.poblacion }}</li>
                                    <li><strong>Patologia:</strong> {{ profesional.patologia }}</li>
                                    <li><strong>Obras sociales:</strong> {{ profesional.obras_sociales }}</li>
                                    <li><strong>Contacto:</strong> {{ profesional.contacto }}</li>
                                    <li><strong>Horarios:</strong> {{ profesional.horarios }}</li>
                                </ul>
                                <div class="text-center mt-3">
                                    <p><strong>Escaneá para guardar el contacto:</strong></p>
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=Nombre:%20{{ profesional.nombre_completo }}%0A{{ especialidad.nombre }}%0AContacto:%20{{ profesional.contacto }}%0AHorario:%20{{ profesional.horarios }}" alt="QR contacto {{ profesional.nombre_completo }}">
                                </div>
                            </div>
                        </div>

                        {% empty %} 
                        <p class="text-muted">No hay profesionales en esta especialidad.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% empty %} 
            <p class="text-muted">No hay especialidades.</p>
            {% endfor %}
        </div>
    </div>
</section>

<hr>

<section class="container py-1" style="background-color: rgb(37, 187, 149);">
    <div class="row justify-content-center contact-group">
        <div class="col-12 col-md-4 mb-2 d-flex justify-content-center">
            <div class="card h-100" style="width: 25rem;">
                <div class="card-body text-center">
                    <h5 class="card-title">Horario</h5>
                    <p class="card-text">De Lunes a Viernes <br>
                        08:00 hs. a 12:00 hs.<br>
                        16:00 hs. a 20:00 hs.</p>
                </div>
            </div>
        </div> 
    </div>
    <div class="row justify-content-center contact-group"></div>
        <div class="col-12 col-md-4 mb-2 d-flex justify-content-center">
            <div class="card h-100" style="width: 25rem;" >
                <div class="card-body text-center">
                    <h5 class="card-title">Turnos</h5>
                    <p class="card-text">3764-141891</p>
                    <a href="#" class="card-link">Escribinos un mensaje</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center contact-group"></div>
        <div class="col-12 col-md-4 mb-2 d-flex justify-content-center">
            <div class="card h-100" style="width: 25rem;">
                <div class="card-body text-center">
                    <h5 class="card-title">Contacto</h5>
                    <p class="card-text">clinicadelcentro.posadas@gmail.com</p>
                    <a href="#" class="card-link">Escribinos un email</a>
                </div>
            </div>
        </div>
    </div>
</section>

<hr>

<section class="container" style="background-color: rgb(17, 163, 189);">
    <h2 class="text-center mb-4 anim-map">Dónde estamos</h2>
    <div class="row justify-content-center pb-3 anim-map">
        <img src="{% static 'img/mapa.jpg' %}" class="w-50 h-100" alt="mapa">
    </div>
</section>
 
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script>
    // Registrar el plugin 
    gsap.registerPlugin(ScrollTrigger);

    // Animación primera
    const somosItems = document.querySelectorAll('.anim-section');
    
    gsap.from(somosItems, {
        scrollTrigger: {
            trigger: '.anim-section',
            start: "top 80%",
            toggleActions: "restart none none none",
        },
        x: 50,
        opacity: 0,
        duration:1.5,
        stagger: 0.2,
        ease: "power2.out"
    });

    // Animación turnos y contacto
    const contact = document.querySelectorAll('.contact-group');
    gsap.from("contact", {
        scrollTrigger: {
            trigger: ".contact-group", 
            start: "top 80%",
            toggleActions: "restart none none none",
        },
        y: 50,
        opacity: 0,
        duration: 1.5,
        stagger: 0.2,
        ease: "power2.out"
    });
    
</script>
{% endblock %}